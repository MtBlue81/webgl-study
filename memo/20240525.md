## OrthographicCamera
- 平行投影 (直方体のかたちで切り取られる)
- 現実世界ではありえない (Perspectiveだけ)
- 遠近感のあるパースがかからなくなる
  - 遠近感がなくなる
- シムシティのようにトイ(ゲーム)っぽさの質感を演出する
- GUIのパーツなど、2D的な表現
  - HUDなどがあてはまりそう
- 3Dと2Dを行き来する場合の例など
  https://farfromhere.emmitfenn.com/


## ２次元への投影
/Users/mtblue81/Library/Application Support/CleanShot/media/media_zb1Vr94gzS/CleanShot 2024-05-25 at 14.28.55.png
- 2Dに置き換えるときに一度投影空間を立方体に置き換え(計算し)て描画を作る
- Perspectiveの場合は、四角錐を一度立方体にするときに手前の狭い部分を広げる (手前の物体のサイズが変わる)
- Orthographicの場合は、奥行きを詰めるだけなので、サイズ変更が起こらない


## 回転
- オブジェクトの中心を軸に回転している
  - ローカル空間の原点 (=オブジェクトの中心 = Geometryの原点)
- 自由に軸を決めるのが難しい (移動 & 回転を連続させるしかない？)
- three.jsの世界では回転が先に起きる
  - 回転は(ワールド)原点を中心に回す
  - 個別のmeshを回転させているのは、一度原点で回してから、位置を所望の位置に移動させている
  - 全オブジェクトでこれを繰り返す
- ネイティブのWebGLなどでは逆にもできる(けどあまりやらないぽい)

## Group
- THREE.Group = Object3D
  - 意図がわかるように別名クラスを準備したという歴史
- `groupというdivの中にメッシュしたdivを追加してgroupを回転させるイメージであっていますか？`
  - YES

### 原則
  - 3D プログラミングにおける回転とは、世界全体を回転させること
  - 回転は常に世界の中心（原点）で行われる
  - 移動してから回転するのと、回転してから移動するのとでは、意味がまったく違ってくる
  - 3D では一般に、回転を先に行うことが多い
  - three.js でも回転が先に処理される
  - three.js で移動を先に行いたい場合、グループ機能を活用する


## テクスチャ
- WebGLの場合、動画やCanvas2Dで書いたものも使えるというメリット
- マテリアルの色と乗算されて描画されるので、そのままの色で表示したい場合は、マテリアル色を白に
- Textureの制限
  - 昔はTextureの１辺の長さは2の累乗である必要があった
  - WebGL1.0では2の累乗を推奨していた (GPUに依存するため)
    - いまはあまり問題ないことが多い
    - three.jsは自動で2の累乗にリサイズしてくれる (WebGL2.0前提にバージョンアップしたのでいまはわからないけど)
  - WebGL2.0では理論的には問題なくなった

## 深度テスト
- 裏にあるものを隠す、ということはなにをやっているのか、という話
- ピクセルひとつずつ、深度テストで表示していいものを計算している
- WebGLが持っている機能(three.jsもWebGLの機能を使っている)
- 透明度がある場合に難しくなる
  - 裏側にあるものは色が捨てられるはず、なのに透明度があると混ぜる必要がある
  - 深度テストによって欠損されると、半透明にしようがなくなってしまう
  - 奥から順番に描画すれば混ぜてよいことになる -> three.jsはそれ(奥行きによるソート)を自動でやってくれる
    ただしメッシュに対してだけなので、Geometryを構成するポリゴンレベルの並びは対象にできない -> 完璧にはできない
## OrthographicCamera
- 平行投影 (直方体のかたちで切り取られる)
- 現実世界ではありえない (Perspectiveだけ)
- 遠近感のあるパースがかからなくなる
  - 遠近感がなくなる
- シムシティのようにトイ(ゲーム)っぽさの質感を演出する
- GUIのパーツなど、2D的な表現
  - HUDなどがあてはまりそう
- 3Dと2Dを行き来する場合の例など
  https://farfromhere.emmitfenn.com/


## ２次元への投影
/Users/mtblue81/Library/Application Support/CleanShot/media/media_zb1Vr94gzS/CleanShot 2024-05-25 at 14.28.55.png
- 2Dに置き換えるときに一度投影空間を立方体に置き換え(計算し)て描画を作る
- Perspectiveの場合は、四角錐を一度立方体にするときに手前の狭い部分を広げる (手前の物体のサイズが変わる)
- Orthographicの場合は、奥行きを詰めるだけなので、サイズ変更が起こらない


## 回転
- オブジェクトの中心を軸に回転している
  - ローカル空間の原点 (=オブジェクトの中心 = Geometryの原点)
- 自由に軸を決めるのが難しい (移動 & 回転を連続させるしかない？)
- three.jsの世界では回転が先に起きる
  - 回転は(ワールド)原点を中心に回す
  - 個別のmeshを回転させているのは、一度原点で回してから、位置を所望の位置に移動させている
  - 全オブジェクトでこれを繰り返す
- ネイティブのWebGLなどでは逆にもできる(けどあまりやらないぽい)

## Group
- THREE.Group = Object3D
  - 意図がわかるように別名クラスを準備したという歴史
- `groupというdivの中にメッシュしたdivを追加してgroupを回転させるイメージであっていますか？`
  - YES

### 原則
  - 3D プログラミングにおける回転とは、世界全体を回転させること
  - 回転は常に世界の中心（原点）で行われる
  - 移動してから回転するのと、回転してから移動するのとでは、意味がまったく違ってくる
  - 3D では一般に、回転を先に行うことが多い
  - three.js でも、やはり回転が先に処理される
  - three.js で移動を先に行いたい場合、グループ機能を活用する


## テクスチャ
- WebGLの場合、動画やCanvas2Dで書いたものも使えるというメリット
- マテリアルの色と乗算されて描画されるので、そのままの色で表示したい場合は、マテリアル色を白に
- Textureの制限
  - 昔はTextureの１辺の長さは2の累乗である必要があった
  - WebGL1.0では2の累乗を推奨していた (GPUに依存するため)
    - いまはあまり問題ないことが多い
    - three.jsは自動で2の累乗にリサイズしてくれる (WebGL2.0前提にバージョンアップしたのでいまはわからないけど)
  - WebGL2.0では理論的には問題なくなった

## 深度テスト
- 裏にあるものを隠す、ということはなにをやっているのか、という話
- ピクセルひとつずつ、深度テストで表示していいものを計算している
- WebGLが持っている機能(three.jsもWebGLの機能を使っている)
- 透明度がある場合に難しくなる
  - 裏側にあるものは色が捨てられるはず、なのに透明度があると混ぜる必要がある
  - 深度テストによって欠損されると、半透明にしようがなくなってしまう
  - 奥から順番に描画すれば混ぜてよいことになる -> three.jsはそれ(奥行きによるソート)を自動でやってくれる
    ただしメッシュに対してだけなので、Geometryを構成するポリゴンレベルの並びは対象にできない -> 完璧にはできない
